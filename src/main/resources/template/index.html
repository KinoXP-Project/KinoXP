<!doctype html>
<html lang="da">
<head>
    <meta charset="utf-8" />
    <title>KinoXP – Program</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
        body { font-family: system-ui, sans-serif; margin: 24px; }
        h1 { margin-bottom: 12px; }
        .card { padding:12px; border:1px solid #ddd; border-radius:10px; margin:10px 0; }
        .muted { color:#666; font-size: 0.9rem; }
        .badge { padding:2px 6px; border:1px solid #aaa; border-radius:6px; margin-left: 6px; font-size: .8rem; }
        a { text-decoration: none; color: #0b57d0; }
    </style>
</head>
<body>
<h1>Kommende forestillinger</h1>
<div id="status" class="muted">Henter program…</div>
<div id="list"></div>

<script src="app.js"></script>
<script>
    (async function loadProgram() {
        const statusEl = document.getElementById('status');
        const listEl = document.getElementById('list');

        try {
            const shows = await api.getUpcoming();

            if (!shows || shows.length === 0) {
                statusEl.textContent = "Ingen kommende forestillinger.";
                return;
            }
            statusEl.remove();

            for (const s of shows) {
                const item = document.createElement('div');
                item.className = 'card';
                const when = formatDateTime(s.startAt);
                item.innerHTML = `
            <div>
              <a href="movie.html?id=${encodeURIComponent(s.movieId)}"><strong>${escapeHtml(s.title)}</strong></a>
              <span class="badge">${escapeHtml(s.category || '')}</span>
              <span class="badge">${s.ageLimit ?? ''}+</span>
            </div>
            <div class="muted">${escapeHtml(s.theater)} — ${when}</div>
            <div class="muted">Medvirkende: ${escapeHtml(s.actors || '')}</div>
          `;
                listEl.appendChild(item);
            }
        } catch (e) {
            statusEl.textContent = "Kunne ikke hente programmet: " + e.message;
        }
    })();
</script>
</body>
</html>
